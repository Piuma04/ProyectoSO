Pseudo_Algoritmo

sem despertar = 0
sem otros_elfos = 3
mutex renos = 0
mutex mutex
sem elf_con_dif = 0 //contador
sem esperando_santa_elf = 0 //hace que esperen a santa
sem ren_vuelta_vacaciones = 0 //contador
sem esperando_en_cabaña = 0 //hace que esperen a santa

//los elfos están creando juguetes constantemente
elfo{
if(dificultad al hacer juguete){  //esto sería un número random
		wait(otros_elfos)
lock(elfos)
		if( trywait( elf_con_dif) != 0)
signal(despertar) 	
unlock(elfos)
wait(esperando_santa_elf)

recibirAyuda()

lock(elfos)
if(try_wait(elf_con_dif) != 0)
		for(2) signal(elf_con_dif)
		for(3) signal(otros_elfos)
unlock(elfos)
}

añadirJugueteAColeccion()
}

reno{ //fijarse si los renos hacen algo después de ser enganchados al trineo
	sleep(numero random que simboliza las vacaciones)
	lock(renos)
		if( trywait( ren_vuelta_vacaciones) != 0) //si es el último
				signal(despertar)
unlock(renos)
wait(esperando_en_cabaña)
}





santa claus{
	wait(despertar)
	lock(renos)
          	if(trywait(ren_vuelta_vacaciones) == 0) //veo si estan los renos
		signal(ren_vuelta_vacaciones) //si no estan, devuelvo el turno que tome	
	else
		prepararTrineo() //si no hay lugares libres, preparo el trineo
	unlock(renos)
          lock(elfos)
           if(trywait(elf_con_dif) == 0) //veo si hay elfos
		signal( elf_con_dif) //si no hay, devuelvo el turno que tome	
	else
		ayudarElfos() //si no hay lugares libres, ayudo a los elfos
		for( 3 ) signal(esperando_santa_elf)
for(2) signal(elf_con_dif)
          unlock(elfos)
}
